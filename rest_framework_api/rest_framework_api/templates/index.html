<!DOCTYPE html>
<html lang="en">

<head>
  {% block title %}
  <title>Al quotient | sketch2code </title>
  {% endblock %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  {% block meta_tag %}
  <meta name="description" content="">
  <meta name="og:title" content="">
  <meta name="og:description" content="">
  <meta name="og:image" content="">
  <meta name="og:url" content="">
  {% endblock %}
  <!--===============================================================================================-->
  <link rel="icon" type="image/png" href="images/icons/favicon.ico" />
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/signup/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/signup/fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/signup/fonts/iconic/css/material-design-iconic-font.min.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/signup/animate.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/signup/hamburgers.min.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/signup/animsition.min.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/signup/select2.min.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/signup/daterangepicker.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" type="text/css" href="/static/css/signup/util.css">
  <link rel="stylesheet" type="text/css" href="/static/css/signup/main.css">
  <!--===============================================================================================-->
  <link rel="stylesheet" href="/static/css/line-icons.css">

  <link rel="stylesheet" href="/static/css/main.css">
  <link rel="stylesheet" href="/static/css/responsive.css">

  <link rel="stylesheet" type="text/css" href="/static/css/component.css" />
  {% block extra_style %}
  {% endblock %}
  <style>
      .view_image {
        height: 100%;
        width: 100%;
      }
      .view_image img {
        height: 100%;
        width: 100%
      }
    </style>
    
</head>

<body>
  {% block header %}
  <nav class="navbar navbar-expand-md bg-inverse fixed-top scrolling-navbar">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
        aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <i class="lni-menu"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
      </div>
    </div>
  </nav>
  {% endblock %}

  {% block body %}
  <div class="section_full">
    <div class="container h-100 pb-0">
      <div class="row space-100  h-100 align-items-top  justify-content-between">
        <div class="col-sm-12 mt-5 ">
         
        </div>
        <div class="col-sm-12 col-lg-5">
          <div class="urlconverter-section-1-title">
            <h1>Upload .png image file here</h1>
          </div>
          <form>
            {% csrf_token %}
            <div class="mt-5 mb-5">
              <div class="upload-img-bar" id="conversion_div">
                <!-- <span> -->
                  <div class="view_image">
                    <img id="blah" src="/static/img/Profile-blank-male.png" alt="">
                  </div>
                  
                <!-- </span> -->
                <div class="Upload_container">
                  <span class="js">
                    <span class="box">
                      <input type="file" name="card" required="" onchange="uploadphoto(this);" id="id_card"
                        class="inputfile inputfile-1">
                      <label for="id_card"><i class="fa fa-cloud-upload" aria-hidden="true"></i> <span
                          class="file_name_here">Upload Here</span></label>
                    </span>
                  </span>
                </div>
              </div>
              <span id="file_input_error" class="d-block color_red mt-2"></span>
            </div>
            <div class="col-md-12 text-center mb-4">
              <button type="button" name="" value="" onclick="ClearFileInput()" class="btn common-btn">Clear</button>
            </div>
          </form>
        </div>
        <div class="col-sm-12 col-lg-6">
          <div class="urlconverter-section-1-title">
            <h1>Analyzed response</h1>
          </div>
          <div class="form-group mt-5 mb-5">
            
            <textarea class="form-control" id="response" placeholder="Output Will be here" rows="6"></textarea>
            <div class="help-block with-errors"></div>
          </div>
          <span class="d-block mt-2"></span>
          <div class="col-md-12 text-center mb-4 download_container" id="download_container_id">
            <!-- <button type="button" name="" value="" class="btn common-btn">Download</button>            -->
            <!-- <span id="download"></span> -->
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endblock %}

  <!-- Footer Section Start -->
  <footer style="margin-bottom: -5px;">
    <!-- Footer Area Start -->
    <section class="footer-Content footer_full" style="padding: 0 1rem;">
      <!-- Copyright Start  -->
      <div class="copyright" style="margin-top: 0">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="site-info float-left">
                <p> <a href="https://www.aiquotient.app/">aiquotient</a> &copy;
                  <script>document.write(new Date().getFullYear())</script>. All rights reserved.</p>
              </div>
              <div class="float-right">
                <ul class="footer-social">
                  <li><a class="twitter" href="#"><i class="lni-twitter-filled"></i></a></li>
                  <li><a class="linkedin" href="#"><i class="lni-linkedin-fill"></i></a></li>
                  <li><a class="google-plus" href="#"><i class="lni-google-plus"></i></a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Copyright End -->
    </section>
    <!-- Footer area End -->
  </footer>
  <!-- Footer Section End -->

  <div id="preloader">
    <div class="loader" id="loader-1"></div>

  </div>

  {% block modal %}
  {% endblock %}
  <!--===============================================================================================-->
  <script src="/static/js/jquery-min.js"></script>
  <!--===============================================================================================-->
  <script src="/static/js/signup/animsition.min.js"></script>
  <!--===============================================================================================-->
  <script src="/static/js/popper.min.js"></script>
  <script src="/static/js/bootstrap.min.js"></script>
  <!--===============================================================================================-->
  <script src="/static/js/signup/select2.min.js"></script>
  <!--===============================================================================================-->
  <script src="/static/js/signup/moment.min.js"></script>
  <script src="/static/js/signup/daterangepicker.js"></script>
  <!--===============================================================================================-->
  <script src="/static/js/signup/countdowntime.js"></script>
  <!--===============================================================================================-->
  <script src="/static/js/signup/main.js"></script>
  <script type="text/javascript">
    $(window).on('load', function () {

      $('body').scrollspy({
        target: '.navbar-collapse',
        offset: 195
      });

      $(window).on('scroll', function () {
        if ($(window).scrollTop() > 100) {
          $('.fixed-top').addClass('menu-bg');
        } else {
          $('.fixed-top').removeClass('menu-bg');
        }
      });

    });
  </script>
  {% block extra_script %}
  <!-- Added Script -->
  <script src="/static/js/custom-file-input.js" type="text/javascript"></script>

  <script>
      $(document).ready(function(){
        $("#btnSubmit").attr("disabled", true);
      })
  </script>

  <script>

    var _validFileExtensions_img = ['.png'];

    function uploadphoto(oInputimg) {

      if (oInputimg.type == "file") {

        var sFileName = oInputimg.value;

        if (sFileName.length > 0) {
          var blnValid = false;
          for (var j = 0; j < _validFileExtensions_img.length; j++) {
            var sCurExtension = _validFileExtensions_img[j];
            if (sFileName.substr(sFileName.length - sCurExtension.length, sCurExtension.length).toLowerCase() == sCurExtension.toLowerCase()) {
              blnValid = true;
              break;
            }
          }
          var extesion = sFileName.substr(sFileName.length - sCurExtension.length, sCurExtension.length).toLowerCase();

          if (jQuery.inArray(extesion, _validFileExtensions_img) !== -1) {

            var reader = new FileReader();
    
            reader.onload = function (e) {
                $('#blah')
                    .attr('src', e.target.result)

            };

            reader.readAsDataURL(oInputimg.files[0]);

            $(".Upload_container").css("display", "none");
            $(".view_image").css("display", "block");
            $("#file_input_error").text("");

            file_upload()

          }
         
          else {
            $("#file_input_error").text("Please Upload valid file");
            $(".view_image").css("display", "none");
            $(".Upload_container").css("display", "block");
            $("#response").html("");
            oInputimg.value = "";
          }

        }
      }
      return true;
    }
  </script>
  <script>
    function ClearFileInput() {
      $("#file_input_error").text('')
      $(".view_image").css("display", "none");
      $(".Upload_container").css("display", "block");
      $(".file_name_here").text("Upload Here");
      $("#response").html("");
      $("#id_card").val('');

    }
  </script>
  <script>
    function file_upload() {
        var form = new FormData()
        form.append("csrfmiddlewaretoken", $("input[name='csrfmiddlewaretoken']").val()),
        form.append("image", $("#id_card").prop('files')[0]),
        $("#preloader").css("display", "block");
            $.ajax({
                url: "{% url 'MBTIAPIView' %}",
                type: 'POST',
                data: form,
                async: true,
                cache: false,
                contentType: false,
                enctype: 'multipart/form-data',
                processData: false,
                success: function (response) {
                    $("#file_input_error").text('')
                    $('#response').html(JSON.stringify(response['result']['Big 5'], undefined, 4));
                    $("#preloader").css("display", "none");
                },
                error: function (response) {
                    if (response['responseJSON']['error']['statusCode'] == 400) {
                        if (response['responseJSON']['error']['message']['video']) {
                            $("#file_input_error").text(response['responseJSON']['error']['message']['video'].join())
                        } else if (response['responseJSON']['error']['message']['non_field_errors']) {
                            $("#file_input_error").text(response['responseJSON']['error']['message']['non_field_errors'].join())
                        }
                    }
                    else{
                        $("#file_input_error").text('There is internal server error please try after some time.')
                    }
                    $("#preloader").css("display", "none");
                }
            });
    }
    </script>
  {% endblock %}

</body>

</html>